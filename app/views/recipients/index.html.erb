<h1>All Recipients</h1>

<table class="data-table">
  <thead>
    <tr style="background-color: #f5f5f5;">
      <th>Name</th>
      <th>Birthday</th>
      <th>Age</th>
      <th>Gender</th>
      <th>Relation</th>
      <th>Occupation</th>
      <th>Hobbies</th>
      <th>Likes</th>
      <th>Dislikes</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @recipients.each do |recipient| %>
      <tr>
        <td><%= link_to recipient.name, recipient_path(recipient) %></td>
        <td><%= recipient.birthday %></td>
        <td><%= display_age(recipient) %></td>
        <td><%= recipient.gender %></td>
        <td><%= recipient.relation %></td>
        <td><%= recipient.occupation.presence || "-" %></td>
        <td><%= recipient.hobbies.presence || "-" %></td>
        <td>
          <% if recipient.likes.present? %>
            <div style="margin: 0; padding-left: 1rem;">
              <% recipient.likes.each do |like| %>
                <% if like.match(/^[a-zA-Z]/) %>
                  <div style="margin: 0.2rem 0;"><%= like %></div>
                <% end %>
              <% end %>
            </div>
          <% else %>
            <em>No likes</em>
          <% end %>
        </td>
        <td>
          <% if recipient.dislikes.present? && !(recipient.dislikes == '') %>
            <div style="margin: 0; padding-left: 1rem;">
              <% recipient.dislikes.each do |dislike| %>
                <% if dislike.match(/^[a-zA-Z]/) %>
                  <div style="margin: 0.2rem 0;"><%= dislike %></div>
                <% end %>
              <% end %>
            </div>
          <% else %>
            <em>No dislikes</em>
          <% end %>
        </td>
        <td>
          <%= link_to "Edit", edit_recipient_path(recipient) %>
          <%= link_to "Delete", recipient_path(recipient), data: { turbo_method: :delete } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "Add New Recipient", new_recipient_path %> |
<%= link_to "Back to Home", homepage_path %>
